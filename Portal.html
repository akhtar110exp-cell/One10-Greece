<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ONE10 EXPRESS | Final Portal</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        /* Base Styling */
        body { background: #000; color: white; user-select: none; font-family: 'Segoe UI', sans-serif; margin: 0; }
        
        /* Extraction Overlay */
        #extractionOverlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.95); z-index: 2000; display: none;
            flex-direction: column; align-items: center; justify-content: center;
        }
        .scanner-ring {
            width: 120px; height: 120px; border: 5px solid #333;
            border-top: 5px solid #f89d21; border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* A4 Document Box */
        .a4-container {
            width: 210mm; height: 297mm; padding: 15mm; margin: 40px auto;
            background: white; color: black; position: relative; box-sizing: border-box;
            box-shadow: 0 0 50px rgba(0,0,0,0.8); border-radius: 5px;
        }

        .header { text-align: center; border-bottom: 3px solid #f89d21; margin-bottom: 30px; padding-bottom: 10px; }
        .watermark { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); opacity: 0.05; width: 80%; pointer-events: none; }

        /* 12 Boxes Grid */
        .field-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; }
        .field-box { 
            border: 2px solid #e0e0e0; border-radius: 15px; padding: 12px; 
            text-align: center; background: #fdfdfd; transition: 0.3s;
        }
        .field-box:hover { border-color: #f89d21; }
        .field-box label { display: block; font-size: 8pt; color: #f89d21; font-weight: 800; text-transform: uppercase; margin-bottom: 5px; }
        .field-box input { width: 100%; border: none; text-align: center; font-weight: 700; font-size: 11pt; outline: none; background: transparent; color: #333; }

        /* Stamp & Footer */
        .stamp { position: absolute; bottom: 15%; right: 10%; border: 5px double green; color: green; padding: 10px 20px; transform: rotate(-15deg); font-weight: 900; font-size: 18pt; opacity: 0.7; }
        .footer-brand { position: absolute; bottom: 15mm; left: 15mm; font-size: 9pt; font-weight: 800; }
        .serial-box { position: absolute; bottom: 15mm; right: 15mm; text-align: right; }

        /* Control Buttons */
        .controls { text-align: center; margin: 20px; position: sticky; top: 10px; z-index: 100; }
        .btn { padding: 12px 30px; border-radius: 50px; border: none; font-weight: 900; cursor: pointer; transition: 0.3s; font-size: 10pt; text-transform: uppercase; margin: 5px; }
        .btn-extract { background: #f89d21; color: white; box-shadow: 0 5px 15px rgba(248,157,33,0.3); }
        .btn-download { background: #27ae60; color: white; box-shadow: 0 5px 15px rgba(39,174,96,0.3); }
        .btn-reset { background: #e74c3c; color: white; box-shadow: 0 5px 15px rgba(231,76,60,0.3); }
        .btn:hover { transform: scale(1.05); filter: brightness(1.1); }
    </style>
</head>
<body oncontextmenu="return false;">

    <audio id="audioEn"><source src="https://translate.google.com/translate_tts?ie=UTF-8&q=Please%20wait%20data%20is%20being%20extracted&tl=en&client=tw-ob" type="audio/mpeg"></audio>
    <audio id="audioUr"><source src="https://translate.google.com/translate_tts?ie=UTF-8&q=Intezar%20farmaiye%20apka%20data%20extract%20kia%20ja%20raha%20ha%20Shukria&tl=ur&client=tw-ob" type="audio/mpeg"></audio>

    <div id="extractionOverlay">
        <div class="scanner-ring"></div>
        <h2 style="color:#f89d21; margin-top:25px; letter-spacing:3px;">SYSTEM SCANNING...</h2>
        <p id="statusTxt" style="font-size:15pt; margin-top:10px;"></p>
    </div>

    <div class="controls">
        <button class="btn btn-extract" onclick="runExtraction()">Extract Data</button>
        <button class="btn btn-reset" onclick="resetForm()">Reset Portal</button>
        <button class="btn btn-download" onclick="secureDownload()">Download Slip</button>
    </div>

    <div id="captureArea" class="a4-container">
        <img src="logo.jpeg" class="watermark">
        
        <div class="header">
            <h1 style="letter-spacing: 5px; font-size: 26pt; margin: 0;">ONE10 EXPRESS</h1>
            <p style="font-size: 10pt; font-weight: 600; color: #555;">GREECE PERMIT VALIDATION SUMMARY</p>
        </div>

        <div class="field-grid">
            <div class="field-box"><label>Phone</label><input type="text" id="phone" placeholder="..."></div>
            <div class="field-box"><label>Mobile</label><input type="text" id="mobile" placeholder="..."></div>
            <div class="field-box"><label>Full Name</label><input type="text" id="name" value="ZAIN FARUKH"></div>
            
            <div class="field-box"><label>Greek Decision No.</label><input type="text" id="decision" value="AM350701/2025"></div>
            <div class="field-box"><label>Employer Name</label><input type="text" id="employer" value="HELLENIC SERVICES"></div>
            <div class="field-box" style="border: 2px solid #f89d21;"><label>Agent Name</label><input type="text" id="agentInput" placeholder="REQUIRED*" style="color:red;"></div>
            
            <div class="field-box"><label>AM Number</label><input type="text" id="am" value="9920392"></div>
            <div class="field-box"><label>Apofasi Year</label><input type="text" id="year" value="2025"></div>
            <div class="field-box"><label>Apofasi Number</label><input type="text" id="apofasi" value="30356"></div>
            
            <div class="field-box"><label>Passport Number</label><input type="text" id="passport" value="PK902231"></div>
            <div class="field-box"><label>Expiration Date</label><input type="text" id="expiry" value="12-OCT-2029"></div>
            <div class="field-box"><label>Region</label><input type="text" id="region" value="ATHENS, GREECE"></div>
        </div>

        <div class="stamp">VERIFIED & READY</div>

        <div class="footer-brand">PRESENT BY SYED AMMAR</div>
        <div class="serial-box">
            <p style="font-size:8pt; color:#888; margin:0;">System Serial:</p>
            <p id="serial" style="font-weight:900; color:#f89d21; margin:0;">OX-7721-9920</p>
        </div>
    </div>

    <script>
        // 1. Extraction Logic with Voice Messages
        function runExtraction() {
            const overlay = document.getElementById('extractionOverlay');
            const status = document.getElementById('statusTxt');
            overlay.style.display = 'flex';
            
            document.getElementById('audioEn').play();
            status.innerText = "Please wait, extracting data...";

            setTimeout(() => {
                document.getElementById('audioUr').play();
                status.innerText = "انتظار فرمائیے، ڈیٹا نکالا جا رہا ہے۔۔۔";
            }, 4000);

            setTimeout(() => {
                overlay.style.display = 'none';
                document.getElementById('phone').value = "03022222892";
                document.getElementById('mobile').value = "03022222892";
                alert("Data Successfully Extracted!");
            }, 8500);
        }

        // 2. Reset Function
        function resetForm() {
            if(confirm("Are you sure you want to clear all data?")) {
                const inputs = document.querySelectorAll('input');
                inputs.forEach(input => {
                    if(input.id !== 'agentInput') input.value = "";
                });
                document.getElementById('agentInput').value = "";
                document.getElementById('agentInput').placeholder = "REQUIRED*";
                generateSerial();
            }
        }

        // 3. Download Logic
        function secureDownload() {
            const agent = document.getElementById('agentInput').value;
            if(!agent || agent === "REQUIRED*") {
                alert("ERROR: Agent Name must be filled!");
                return;
            }

            html2canvas(document.querySelector("#captureArea"), { scale: 2 }).then(canvas => {
                const link = document.createElement('a');
                link.download = 'Validation_' + agent + '.png';
                link.href = canvas.toDataURL();
                link.click();
            });
        }

        // Serial Generator
        function generateSerial() {
            document.getElementById('serial').innerText = "OX-" + Math.floor(Math.random()*9000+1000) + "-" + Math.floor(Math.random()*9000+1000);
        }
        generateSerial();
    </script>
</body>
</html>
